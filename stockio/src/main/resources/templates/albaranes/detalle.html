<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title th:text="'Albarán - ' + ${albaran.codigo}">Detalle Albarán</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #333;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .company-info h1 {
            margin: 0;
            color: #2c3e50;
            font-size: 24px;
        }

        .company-info p {
            margin: 5px 0 0;
            font-size: 14px;
            color: #555;
        }

        .document-info {
            text-align: right;
        }

        .document-info h2 {
            margin: 0;
            color: #e67e22;
            /* Amber accent */
        }

        .document-info p {
            margin: 5px 0 0;
            font-size: 14px;
        }

        .details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
        }

        .detail-item strong {
            display: block;
            font-size: 12px;
            text-transform: uppercase;
            color: #777;
            margin-bottom: 3px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #2c3e50;
            color: white;
            font-weight: 500;
        }

        .footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #777;
        }

        .signature-box {
            width: 200px;
            height: 80px;
            border-bottom: 1px solid #333;
            margin-top: 20px;
        }

        .actions {
            margin-top: 20px;
            text-align: center;
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            margin: 5px;
            background-color: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-size: 14px;
        }

        .btn-print {
            background-color: #2c3e50;
        }

        .btn-back {
            background-color: #95a5a6;
        }

        /* Ocultar botones al imprimir */
        @media print {
            .actions {
                display: none;
            }

            body {
                padding: 0;
                margin: 0;
                max-width: 100%;
            }
        }
    </style>
</head>

<body>

    <div class="header">
        <div class="company-info">
            <h1>Stockio S.L.</h1>
            <p>Calle Empresarial 123</p>
            <p>08000 Barcelona, España</p>
            <p>CIF: B-12345678</p>
            <p>Email: info@stockio.com</p>
        </div>
        <div class="document-info">
            <h2>ALBARÁN</h2>
            <p th:text="'Nº: ' + ${albaran.codigo}">Nº: ENT-0001</p>
            <p th:text="'Fecha: ' + ${#temporals.format(albaran.fecha, 'dd-MM-yyyy HH:mm')}">Fecha: 01-01-2024</p>
        </div>
    </div>

    <div class="details-grid">
        <div class="detail-item">
            <strong>Tipo de Movimiento</strong>
            <span th:text="${albaran.tipo}">ENTRADA</span>
        </div>
        <div class="detail-item">
            <strong>Almacén</strong>
            <span th:text="${albaran.almacen != null ? albaran.almacen.nombre : 'N/A'}">Almacén Central</span>
        </div>
        <div class="detail-item">
            <strong>Usuario Responsable</strong>
            <span th:text="${albaran.usuario != null ? albaran.usuario.email : 'Sistema'}">usuario@email.com</span>
        </div>
        <div class="detail-item">
            <strong>Estado</strong>
            <span>CONFIRMADO</span>
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Producto</th>
                <th style="width: 100px;">Cantidad</th>
                <th style="width: 120px;">Precio Unit.</th>
                <th style="width: 120px;">Total</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="linea : ${lineas}">
                <td th:text="${linea.producto.nombre}">Tornillos</td>
                <td th:text="${linea.cantidad}">50</td>
                <td th:text="${linea.precioUnitario != null ? linea.precioUnitario + ' €' : '-'}">10.00 €</td>
                <td th:text="${linea.precioUnitario != null ? (linea.cantidad * linea.precioUnitario) + ' €' : '-'}">
                    500.00 €</td>
            </tr>
            <tr th:if="${lineas.empty}">
                <td colspan="4" style="text-align: center;">No hay líneas en este albarán.</td>
            </tr>
        </tbody>
    </table>

    <div class="footer">
        <div>
            <p>Este documento sirve como justificante del movimiento de stock realizado.</p>
            <p>Generado automáticamente por Stockio System.</p>
        </div>
        <div style="text-align: center;">
            <p>Firma / Sello</p>
            <div class="signature-box"></div>
        </div>
    </div>

    <div class="actions">
        <a href="javascript:window.print()" class="btn btn-print">Imprimir / Guardar PDF</a>
        <a href="/albaranes" class="btn btn-back">Volver al Historial</a>
    </div>

</body>

</html>